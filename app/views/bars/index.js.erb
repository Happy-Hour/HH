$('.results').append('<%= escape_javascript render(@bars) %>');

// add listener to add remove bars to crawl list.
$(document).ready(function(){
    console.log('good to go selecting bars');
    $('.results-row').on('click', '.bar-addremove', function(){
        console.log('clicked bar:' + $('.bar-id').html());

        // todo help. Need help with this selector to return not just the first bar.
        var $barId = $('.bar-id').html();
        var temp = toggleBarSelectedLocalStorage($barId);
        console.log('result from toggleBarSelectedLocalStorage: ' + temp);

        // todo design. selected class is a green tick. Without is a cross/+
        $(this).toggleClass('selected');

        //var $barId = $(this).parent().find('.bar-id').value;// = $('.bar-id').value;
        console.log($barId);
    });

    var saveLocalStorage = function(saveKey,saveMe){
        var serializedForSave = JSON.stringify(saveMe);
        localStorage.setItem(saveKey,serializedForSave);
        return true;
    };

    var getLocalStorage = function(key){
        var parseMe = localStorage.getItem(key);
        return JSON.parse(parseMe);
    };

    var toggleBarSelectedLocalStorage = function(barId){
        var bool = getLocalStorage(barId);
        if (bool == true){
            saveLocalStorage(barId,false);
            return false;
        } else if (bool == false){
            saveLocalStorage(barId,true);
            return true
        } else {
            // handles bool == nil or null
            saveLocalStorage(barId,true);
            return true;
        }
    };
});

<% if @bars.next_page %>
  $('.pagination').replaceWith('<%= escape_javascript will_paginate(@bars) %>');
<% else %>
  $('.pagination').remove();
<% end %>  